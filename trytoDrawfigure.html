<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="//code.jquery.com/jquery-1.9.1.min.js"></script>
  <!-- <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script> -->

    <script src="https://d3js.org/d3.v6.js"></script>
    
    <script src="control.js"></script>
    

    <style>
        .figure1{
            position: relative;
            left: 50px;
            top: 50px;
        }
        .figure2{
            position: relative;
            left: 50px;
            top: 50px;
        }
    </style>
    
</head>
<body>
    <svg  width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="7" r="4"></circle><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path></svg>
    <!-- <svg width="42" height="42">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
    </svg> -->
    <div id="figure1" ><h1>hello1</h1></div>
    <div id="figure2" ></div><h1>hello2</h1></div>
   
    
    <script>
        fuc("they")
        fuc1("they")
        
        function fuc(subfeatur){
    
    // console.log(subfeatur)

    // document.getElementById("figure1").innerHTML=" "
   


    // set the dimensions and margins of the graph
    var margin = {top: 10, right: 30, bottom: 30, left: 120},
        width = 460 - margin.left - margin.right,
        height = 400 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    // var svg0 = d3.select("#figure1")
    // .append("svg")
    //     .attr("width", width + margin.left + margin.right)
    //     .attr("height", height + margin.top + margin.bottom)
    // .append("g")
    //     .attr("transform",
    //         "translate(" + margin.left + "," + margin.top + ")");
 
    var svg1 = d3.select("#figure2")
    .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
    .append("g")
        .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");


    //         var svg2 = d3.select("#figure2")
    // .append("svg")
    //     .attr("width", width + margin.left + margin.right)
    //     .attr("height", height + margin.top + margin.bottom)
    // .append("g")
    //     .attr("transform",
    //         "translate(" + margin.left + "," + margin.top + ")");


            d3.csv("dosyalar/all_features_300_scene_1_complete.csv").then( function(data1) {
      
        d3.csv("dosyalar/all_features_300_scene_2_complete.csv").then( function(data2) {

        


            var subfeatures=subfeatur
            
           

            var Data1controListzero=[]
            var Data1controListone=[]
            var Data1controListtwo=[]

            var Data2controListzero=[]
            var Data2controListone=[]
            var Data2controListtwo=[]
          

       
            for( var i=0; i<data1.length; i++){
               

                if(data1[i]["label"]==0){
                    Data1controListzero.push(data1[i][subfeatures])

                }
                if(data1[i]["label"]==1){
                    Data1controListone.push(data1[i][subfeatures])

                    
                }
                if(data1[i]["label"]==2){
                    Data1controListtwo.push(data1[i][subfeatures])
                }
               
            }

            for( var i=0; i<data2.length; i++){
             

                if(data2[i]["label"]==0){
                    Data1controListzero.push(data2[i][subfeatures])

                }
                if(data2[i]["label"]==1){
                    Data2controListone.push(data2[i][subfeatures])

                    
                }
                if(data2[i]["label"]==2){
                    Data2controListtwo.push(data2[i][subfeatures])
                }
               
            }
    


            var data1Allofvalues=[...Data1controListzero,...Data1controListone,...Data1controListtwo]
            var maxAndMinValueFordata1=[Math.max(...data1Allofvalues),Math.min(...data1Allofvalues)]//[max,min]
            // console.log(maxAndMinValueFordata1)
            var data2Allofvalues=[...Data2controListzero,...Data2controListone,...Data2controListtwo]
            var maxAndMinValueFordata2=[Math.max(...data2Allofvalues),Math.min(...data2Allofvalues)]//[max,min]

        //   console.log(data2Allofvalues,data1Allofvalues)
      

            
            function getLimitValues(list){
                var keylist=[]
                
                var rangeValue=list[0]/5
                Math.floor(rangeValue)
                
                //key1,key2,key3,key4,key5

                //key1
                var key1="0-"+rangeValue
                var key2=rangeValue+"-"+2*rangeValue
                var key3=2*rangeValue+"-"+3*rangeValue
                var key4=3*rangeValue+"-"+4*rangeValue
                var key5=+4*rangeValue+"-"+5*rangeValue
                
               keylist.push({
                key:key1,
                value:rangeValue
               },
               {
                key:key2,
                value:2*rangeValue
               },
               {
                key:key3,
                value:3*rangeValue
               },
               {
                key:key4,
                value:4*rangeValue
               },
               {
                key:key5,
                value:5*rangeValue
               })
               return keylist
            }
            
            var limitValuesofdata1=getLimitValues(maxAndMinValueFordata1)//iki grafik iÃ§in limit verileri
            // console.log(limitValuesofdata1)
            var limitValuesofdata2=getLimitValues(maxAndMinValueFordata2)
            //console.log(limitValuesofdata1,limitValuesofdata2)

           //key:[values]//0-62.6:[2,4,45,17,45,60]
            var dictForBuild10=contrl(Data1controListzero,limitValuesofdata1)
            var dictForBuild11=contrl(Data1controListone,limitValuesofdata1)
            var dictForBuild12=contrl(Data1controListtwo,limitValuesofdata1)

           //key:[values]//0-62.6:[2,4,45,17,45,60]
            var dictForBuild20=contrl(Data1controListzero,limitValuesofdata2)
            var dictForBuild21=contrl(Data1controListone,limitValuesofdata2)
            var dictForBuild22=contrl(Data1controListtwo,limitValuesofdata2)



            var buildGraph10=getDictForgrpah(dictForBuild10)
            var buildGraph11=getDictForgrpah(dictForBuild11)
            var buildGraph12=getDictForgrpah(dictForBuild12)
            
            var buildGraph20=getDictForgrpah(dictForBuild20)
            var buildGraph21=getDictForgrpah(dictForBuild21)
            var buildGraph22=getDictForgrpah(dictForBuild22)

       


            var length10=getlengthforgrpah(buildGraph10)
            var length11=getlengthforgrpah(buildGraph11)
            var length12=getlengthforgrpah(buildGraph12)
            
            var length20=getlengthforgrpah(buildGraph20)
            var length21=getlengthforgrpah(buildGraph21)
            var length22=getlengthforgrpah(buildGraph22)
      

            function getmx(len0,len1,len2,list){
                var keylist=[]
                
                var rangeValue=list[0]/5
                
           
                //key1
                var key1="0-"+rangeValue
                var key2=rangeValue+"-"+2*rangeValue
                var key3=2*rangeValue+"-"+3*rangeValue
                var key4=3*rangeValue+"-"+4*rangeValue
                var key5=+4*rangeValue+"-"+5*rangeValue
       
                
               keylist.push({
                key:key1,
                value:[len0[key1], len1[key1],len2[key1]]
               },
               {
                key:key2,
                value:[len0[key2], len1[key2],len2[key2]]
               },
               {
                key:key3,
                value:[len0[key3], len1[key3],len2[key3]]
               },
               {
                key:key4,
                value:[len0[key4], len1[key4],len2[key4]]
               },
               {
                key:key5,
                value:[len0[key5], len1[key5],len2[key5]]
               },
               
               )
               return keylist
            }
                        
            function getlengthforgrpah(dict){
                var newdict={}
                for(len of Object.keys(dict)){
                    newdict[len]=dict[len].length
                }
                
                return newdict
            }

            
            function getDictForgrpah(data){
                var addit={}
                for(var i=0; i<data.length; i++){
                var addkey=data[i].key
                var addvalue=data[i].value    
                if (Object.hasOwn(addit, addkey)) {
                    addit[addkey].push(addvalue)
                }
                else{
                    addit[addkey]=[addvalue,]
                }
            }
            return addit
            }

  

        //0-10:[1,5,12]
       var x0= getmx(length10,length11,length12,maxAndMinValueFordata1)
       var y0domainnames=[x0[0].key,x0[1].key,x0[2].key,x0[3].key,x0[4].key]
       var x0values=[
                [x0[0].key,lookinlist(x0[0].value[0]),//ydomain1
                lookinlist(x0[0].value[1]),
                lookinlist(x0[0].value[2])],

                [x0[1].key,lookinlist(x0[1].value[0]),//ydomain2
                lookinlist(x0[1].value[1]),
                lookinlist(x0[1].value[2])],

                [x0[2].key,lookinlist(x0[2].value[0]),//ydomain3
                          lookinlist(x0[2].value[1]),
                          lookinlist(x0[2].value[2])],

                [x0[3].key,lookinlist(x0[3].value[0]),//ydomain3
                        lookinlist(x0[3].value[1]),
                        lookinlist(x0[3].value[2])],

                [x0[4].key,lookinlist(x0[4].value[0]),//ydomain4
                lookinlist(x0[4].value[1]),
                lookinlist(x0[4].value[2])],
              ]

        var x1= getmx(length20,length21,length22,maxAndMinValueFordata2)
        var y1domainnames=[x1[0].key,x1[1].key,x1[2].key,x1[3].key,x1[4].key]
        var x1values=[[x1[0].key,lookinlist(x1[0].value[0]),//ydomain1
                    lookinlist(x1[0].value[1]),
                lookinlist(x1[0].value[2])],

                [x1[1].key,lookinlist(x1[1].value[0]),//ydomain2
                lookinlist(x1[1].value[1]),
                lookinlist(x1[1].value[2])],

                [x1[2].key,lookinlist(x1[2].value[0]),//ydomain3
                          lookinlist(x1[2].value[1]),
                          lookinlist(x1[2].value[2])],

                [x1[3].key,lookinlist(x1[3].value[0]),//ydomain3
                        lookinlist(x1[3].value[1]),
                        lookinlist(x1[3].value[2])],

                [x1[4].key,lookinlist(x1[4].value[0]),//ydomain4
                lookinlist(x1[4].value[1]),
                lookinlist(x1[4].value[2])],
              ]
              
      

                      
        
       function lookinlist(value){
        if(value<=5){
            value=[5]//1
        }
        if(value>5&&value<=10){
            value=[5,10]//2
        }
        if(value>10&&value<=15){
            value=[5,10,15]//3
        }
        if(value>15&&value<=20){
            value=[5,10,15,20]//4
        }
        if(value>20&&value<=25){
            value=[5,10,15,20,25]//5
        }
        if(value>25&&value<=30){
            value=[5,10,15,20,25,30]//6
        }
        if(value>30&&value<=35){
            value=[5,10,15,20,25,30,35]//7
        }
        if(value>35&&value<=40){
            value=[5,10,15,20,25,30,35,40]//8
        }
        if(value>40&&value<=45){
            value=[5,10,15,20,25,30,35,40,45]//9
        }
        if(value>45&&value<=50){
            value=[5,10,15,20,25,30,35,40,45,50]//10
        }
        if(value>50){
            value=[5,10,15,20,25,30,35,40,45,50]
        }
        if(value==undefined){
            value=[]
        }
        return value

       }



       
       const data0 = [x0values[0],x0values[1],x0values[2],x0values[3],x0values[4]];
       const data11=[x1values[0],x1values[1],x1values[2],x1values[3],x1values[4]];
       
            // var liste11=[...]
            // Append a circle
           
            // Add Y axis
        // var y = d3.scaleBand()
        // .range([ height, 0 ])
        //     .domain(y0domainnames)
        //     .padding(0.05);
        // svg0.append("g")
        //     .style("font-size", 15)
        // svg0.append("g")
        //     .call(d3.axisLeft(y));

     

        //            // Add X axis
        // var x = d3.scaleLinear()
        //     .domain([0, 50])
        //     .range([ 0, width]);
        // svg0.append("g")
        //     .attr("transform", "translate(0," + height + ")")
        //     .call(d3.axisBottom(x))
        //     .selectAll("text")
        //     .attr("transform", "translate(-10,0)rotate(-45)")
        //     .style("text-anchor", "end");



        var y = d3.scaleBand()
        .range([ height, 0 ])
            .domain(y1domainnames)
            .padding(0.05);
        svg1.append("g")
            .style("font-size", 15)
        svg1.append("g")
            .call(d3.axisLeft(y));

     

                   // Add X axis
        var x = d3.scaleLinear()
            .domain([0, 50])
            .range([ 0, width]);
        svg1.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x))
            .selectAll("text")
            .attr("transform", "translate(-10,0)rotate(-45)")
            .style("text-anchor", "end");


          

       const maxCheckvalue0=[
                        data0[0][1],data0[0][2],data0[0][3],
                        data0[1][1],data0[1][2],data0[1][3],
                        data0[2][1],data0[2][2],data0[2][3],
                        data0[3][1],data0[3][2],data0[3][3],
                        data0[4][1],data0[4][2],data0[4][3]]

         const maxCheckvalue1=[
                        data11[0][1],data11[0][2],data11[0][3],
                        data11[1][1],data11[1][2],data11[1][3],
                        data11[2][1],data11[2][2],data11[2][3],
                        data11[3][1],data11[3][2],data11[3][3],
                        data11[4][1],data11[4][2],data11[4][3]]

                        console.log(maxCheckvalue1)      
   
       let maxVl0=Math.max(...maxCheckvalue0)
       let maxVl1=Math.max(...maxCheckvalue1)

       function f(array){
        for(let i=0;i<array[1].length;i++){
            return array[1][i]
        }

       }
       


       let newDatazerozero = []
       let newDatazeroone=[]
       let newDatazerotwo=[]

       for (i of data0) {
            for(val of i[1]){
                newDatazerozero.push({
                    key:i[0],
                    value:val
                })
               
            }

       }
       for (i of data0) {
            for(val of i[2]){
                newDatazeroone.push({
                    key:i[0],
                    value:val
                })
               
            }

       }
       for (i of data0) {
            for(val of i[3]){
                newDatazerotwo.push({
                    key:i[0],
                    value:val
                })
               
            }

       }

       let newDatazero = []
       let newDataone=[]
       let newDatatwo=[]

       for (i of data11) {
            for(val of i[1]){
                newDatazero.push({
                    key:i[0],
                    value:val
                })
               
            }

       }
       for (i of data11) {
            for(val of i[2]){
                newDataone.push({
                    key:i[0],
                    value:val
                })
               
            }

       }
       for (i of data11) {
            for(val of i[3]){
                newDatatwo.push({
                    key:i[0],
                    value:val
                })
               
            }

       }


    


       var tooltip2 = d3.select("#figure2")
    .append("div")
        .style("position", "absolute")
        .style("visibility", "hidden")
        .style("background-color", "white")
        .style("border", "solid")
        .style("border-width", "1px")
        .style("border-radius", "5px")
        .style("padding", "10px")
        .html("<p>I'm a tooltip written in HTML</p><img src='https://github.com/holtzy/D3-graph-gallery/blob/master/img/section/ArcSmal.png?raw=true'></img><br>Fancy<br><span style='font-size: 40px;'>Isn't it?</span>");
        var tooltip1 = d3.select("#figure1")
    .append("div")
        .style("position", "absolute")
        .style("visibility", "hidden")
        .style("background-color", "white")
        .style("border", "solid")
        .style("border-width", "1px")
        .style("border-radius", "5px")
        .style("padding", "10px")
        .html("<p>I'm a tooltip written in HTML</p><img src='https://github.com/holtzy/D3-graph-gallery/blob/master/img/section/ArcSmal.png?raw=true'></img><br>Fancy<br><span style='font-size: 40px;'>Isn't it?</span>");

    //     var tooltip2 = d3.select("#figure1")
    // .append("div")
    //     .style("position", "absolute")
    //     .style("visibility", "hidden")
    //     .style("background-color", "white")
    //     .style("border", "solid")
    //     .style("border-width", "1px")
    //     .style("border-radius", "5px")
    //     .style("padding", "10px")
    //     .html("<p>I'm a tooltip written in HTML</p><img src='https://github.com/holtzy/D3-graph-gallery/blob/master/img/section/ArcSmal.png?raw=true'></img><br>Fancy<br><span style='font-size: 40px;'>Isn't it?</span>");

  
       console.log(newDatazerozero,newDatazeroone,newDatazerotwo)
       console.log(newDatazero,newDataone,newDatatwo)//
    
        // svg0.selectAll("mycircle")
        // .data(newDatazero)
        // .enter()
        // .append("path")
   
        //     .attr("x", function(d) {return x(d.value)})
        //     .attr("y", function(d) {console.log(d.key); return y(d.key+10) })
        //     // .attr("r", "8")
        //     .style("fill", "blue")
        //     .attr("stroke", "black")
        //     .attr("transform","scale(0.2 0.2)")
        //     .attr("d","M0,121.42l0-19.63c10.5-4.67,42.65-13.56,44.16-26.41c0.34-2.9-6.5-13.96-8.07-19.26 c-3.36-5.35-4.56-13.85-0.89-19.5c1.46-2.25,0.84-10.44,0.84-13.53c0-30.77,53.92-30.78,53.92,0c0,3.89-0.9,11.04,1.22,14.1 c3.54,5.12,1.71,14.19-1.27,18.93c-1.91,5.57-9.18,16.11-8.56,19.26c2.31,11.74,32.13,19.63,41.52,23.8l0,22.23L0,121.42L0,121.42z")
             
        //     .on("mouseover", function(d){return tooltip1.style("visibility", "visible");})
        //     .on("mousemove", function(d){return (tooltip1.html("Scene:2"+"<br>"+"Class:HC"+"<br>Range:"+d.path[0]["__data__"].key+"<br> Value:"+d.path[0]["__data__"].value)).style("top", (event.pageY-150)+"px").style("left",(event.pageX-150)+"px");})
        //     .on("mouseout", function(d){return tooltip1.style("visibility", "hidden");})

           
        
   
        // svg0.selectAll("circle456")
        // .data(newDatazeroone)
        // .enter()
        // .append("circle")
        // .on("mouseover", function(d){return tooltip2.style("visibility", "visible");})
        //     .on("mousemove", function(d){return (tooltip2.html("Scene:2"+"<br>"+"Class:SZ"+"<br>Range:"+d.path[0]["__data__"].key+"<br> Value:"+d.path[0]["__data__"].value)).style("top", (event.pageY-150)+"px").style("left",(event.pageX-150)+"px");})
        //     .on("mouseout", function(d){return tooltip2.style("visibility", "hidden");})

        //     .attr("cx", function(d) { return x(d.value);})
        //     .attr("cy", function(d) {console.log(d);  return y(d.key);})
        //     .attr("r", "8")
        //     .style("fill", "green")
        //     .attr("stroke", "black")
            
        
   
        // svg0.selectAll("mycircle")
        // .data(newDatazerotwo)
        // .enter()
        // .append("circle")
        // .on("mouseover", function(d){return tooltip2.style("visibility", "visible");})
        //     .on("mousemove", function(d){return (tooltip2.html("Scene:2"+"<br>"+"Class:BD"+"<br>Range:"+d.path[0]["__data__"].key+"<br> Value:"+d.path[0]["__data__"].value)).style("top", (event.pageY-150)+"px").style("left",(event.pageX-150)+"px");})
        //     .on("mouseout", function(d){return tooltip2.style("visibility", "hidden");})

        //     .attr("cx", function(d) { return x(d.value); })
        //     .attr("cy", function(d) {console.log(d); return y(d.key); })
        //     .attr("r", "8")
        //     .style("fill", "orange")
        //     .attr("stroke", "black")
           
        // svg1.append('path')
        
        // .attr("x",15)
        // .attr("y",45)
        // .attr("fill","red")
        // .attr("transform","scale(0.2 0.2)")
        // .attr("d","M0,121.42l0-19.63c10.5-4.67,42.65-13.56,44.16-26.41c0.34-2.9-6.5-13.96-8.07-19.26 c-3.36-5.35-4.56-13.85-0.89-19.5c1.46-2.25,0.84-10.44,0.84-13.53c0-30.77,53.92-30.78,53.92,0c0,3.89-0.9,11.04,1.22,14.1 c3.54,5.12,1.71,14.19-1.27,18.93c-1.91,5.57-9.18,16.11-8.56,19.26c2.31,11.74,32.13,19.63,41.52,23.8l0,22.23L0,121.42L0,121.42z")
             
  

        // .append("xhtml:body")
        // .html('<i class="icon-fixed-width icon-user"></i>');  


       

            svg1.selectAll("mycircle")
        .data(newDatazero)
        .enter()
        .append("path")
        .attr("transform",
            function(d){
                return "translate("+x(d.value)+" "+(y(d.key)+10)+") scale(0.18 0.18)"})
            .attr("d","M0,121.42l0-19.63c10.5-4.67,42.65-13.56,44.16-26.41c0.34-2.9-6.5-13.96-8.07-19.26 c-3.36-5.35-4.56-13.85-0.89-19.5c1.46-2.25,0.84-10.44,0.84-13.53c0-30.77,53.92-30.78,53.92,0c0,3.89-0.9,11.04,1.22,14.1 c3.54,5.12,1.71,14.19-1.27,18.93c-1.91,5.57-9.18,16.11-8.56,19.26c2.31,11.74,32.13,19.63,41.52,23.8l0,22.23L0,121.42L0,121.42z")
            
            .style("fill", "blue")
            .attr("stroke", "black")
            .on("mouseover", function(d){return tooltip2.style("visibility", "visible");})
            .on("mousemove", function(d){console.log(d);return (tooltip2.html("Scene:2"+"<br>"+"Class:HC"+"<br>Range:"+d.path[0]["__data__"].key+"<br> Value:"+d.path[0]["__data__"].value)).style("top", (event.pageY-150)+"px").style("left",(event.pageX-150)+"px");})
            .on("mouseout", function(d){return tooltip2.style("visibility", "hidden");})

        
       
        svg1.selectAll("circle456")
        .data(newDataone)
        .enter()
        .append("path")
            // .attr("x", function(d) { return x(d.value)})
            // .attr("y", function(d) { return y(d.key)+30; })
            .attr("transform",
            function(d){
                return "translate("+x(d.value)+" "+(y(d.key)+30)+") scale(0.18 0.18)"})
            .attr("d","M0,121.42l0-19.63c10.5-4.67,42.65-13.56,44.16-26.41c0.34-2.9-6.5-13.96-8.07-19.26 c-3.36-5.35-4.56-13.85-0.89-19.5c1.46-2.25,0.84-10.44,0.84-13.53c0-30.77,53.92-30.78,53.92,0c0,3.89-0.9,11.04,1.22,14.1 c3.54,5.12,1.71,14.19-1.27,18.93c-1.91,5.57-9.18,16.11-8.56,19.26c2.31,11.74,32.13,19.63,41.52,23.8l0,22.23L0,121.42L0,121.42z")
            
            .style("fill", "green")
            .attr("stroke", "black")
            .on("mouseover", function(d){return tooltip2.style("visibility", "visible");})
            .on("mousemove", function(d){console.log(d);return (tooltip2.html("Scene:2"+"<br>"+"Class:SZ"+"<br>Range:"+d.path[0]["__data__"].key+"<br> Value:"+d.path[0]["__data__"].value)).style("top", (event.pageY-150)+"px").style("left",(event.pageX-150)+"px");})
            .on("mouseout", function(d){return tooltip2.style("visibility", "hidden");})

        
   
        svg1.selectAll("mycircle")
        .data(newDatatwo)
        .enter()
        .append("path")
        .attr("transform",
            function(d){
                return "translate("+x(d.value)+" "+(y(d.key)+50)+") scale(0.18 0.18)"})
            .attr("d","M3140 12790 c-83 -20 -128 -46 -333 -191 -74 -53 -84 -68 -113 -181 -51 -197 -56 -233 -39 -280 19 -55 20 -51 -17 -71 -65 -36 -73 -58 -70 -190 2 -136 15 -172 62 -182 16 -4 34 -4 39 -1 9 6 14 -39 27 -223 l6 -93 -108 7 c-60 4 -138 10 -174 14 -98 10 -153 -9 -185 -63 -14 -23 -25 -53 -25 -65 0 -33 -82 -238 -140 -349 -52 -100 -60 -139 -35 -182 20 -34 19 -74 -2 -92 -10 -9 -43 -23 -73 -33 -143 -45 -280 -147 -362 -268 -22 -32 -68 -118 -103 -190 -52 -108 -72 -165 -109 -312 -126 -501 -307 -1431 -360 -1853 -46 -357 -62 -778 -37 -952 18 -125 53 -265 111 -440 77 -230 83 -239 198 -314 53 -35 109 -77 124 -92 30 -33 81 -141 72 -155 -3 -5 0 -9 6 -9 18 0 50 19 113 67 67 52 88 51 118 -8 12 -24 33 -46 53 -56 42 -20 45 -31 52 -203 5 -106 2 -168 -15 -290 -44 -325 -52 -431 -52 -705 0 -295 9 -393 60 -630 44 -209 59 -326 78 -622 22 -334 22 -771 -1 -1050 -9 -111 -16 -240 -16 -287 0 -84 0 -85 61 -201 33 -64 59 -117 57 -118 -35 -18 -49 -34 -80 -93 -20 -38 -39 -87 -43 -110 -7 -46 14 -158 51 -276 l24 -77 -35 -119 c-43 -146 -47 -242 -14 -302 21 -37 21 -39 4 -91 -10 -30 -51 -119 -92 -198 l-73 -144 0 -138 c0 -133 1 -139 25 -168 27 -32 130 -76 300 -129 l90 -28 108 47 c120 53 170 86 191 127 8 17 15 76 19 157 2 72 8 138 12 147 3 9 20 21 36 27 16 6 58 36 94 67 l64 57 -6 92 c-6 88 -4 95 21 141 50 89 186 420 209 508 21 82 21 88 5 97 -17 9 -17 12 -2 41 15 29 14 36 -10 122 -79 280 -167 936 -152 1141 13 194 110 647 197 920 38 120 41 140 43 255 3 109 10 158 60 389 l58 264 -16 114 c-22 161 -22 163 14 163 l30 0 0 -115 c0 -80 6 -143 21 -208 81 -362 149 -697 158 -777 21 -184 52 -757 54 -985 2 -195 -1 -238 -15 -280 -26 -75 -68 -425 -68 -567 0 -145 15 -187 86 -240 95 -70 96 -71 96 -115 -1 -30 -10 -54 -35 -90 -19 -26 -46 -69 -61 -95 l-27 -47 69 -35 69 -35 15 -134 c13 -110 23 -150 51 -216 29 -66 37 -98 42 -174 12 -185 3 -165 134 -296 l118 -117 5 -59 c5 -67 69 -208 116 -258 66 -71 163 -89 431 -85 l175 3 32 80 c36 87 44 174 23 250 -6 22 -64 146 -129 275 l-118 235 25 65 c16 44 28 103 35 180 9 108 8 122 -15 220 l-25 105 27 20 c14 10 41 34 59 53 40 42 41 75 7 227 l-26 110 35 67 c49 94 66 188 66 364 0 185 -11 255 -125 824 -52 256 -92 476 -89 490 2 14 13 198 24 410 12 212 31 525 43 695 22 305 22 312 4 410 -11 62 -21 188 -27 330 -5 127 -12 284 -16 351 -6 102 -4 130 11 178 10 31 22 59 27 62 4 3 40 -23 79 -57 l70 -63 103 52 c57 29 107 52 112 52 24 0 202 204 453 520 68 85 133 163 144 173 20 18 21 29 26 565 13 1266 6 1598 -40 1734 -21 64 -162 368 -369 798 -78 162 -169 353 -201 424 -34 72 -95 181 -141 249 l-82 121 -178 85 -178 85 0 61 c0 66 3 61 -98 185 -43 54 -108 181 -177 348 -51 125 -77 152 -144 152 -28 0 -66 -7 -85 -17 -30 -14 -37 -14 -52 -2 -15 12 -14 16 14 39 39 33 82 97 82 124 0 12 9 40 20 64 26 58 18 133 -20 175 l-27 30 28 56 c28 55 29 59 29 228 0 159 -2 178 -25 238 -67 179 -143 274 -251 314 -130 49 -290 71 -374 51z")
            .style("fill", "orange")
            .attr("stroke", "black")
            .on("mouseover", function(d){return tooltip2.style("visibility", "visible");})
            .on("mousemove", function(d){return (tooltip2.html("Scene:2"+"<br>"+"Class:BD"+"<br>Range:"+d.path[0]["__data__"].key+"<br> Value:"+d.path[0]["__data__"].value)).style("top", (event.pageY-150)+"px").style("left",(event.pageX-150)+"px");})
            .on("mouseout", function(d){return tooltip2.style("visibility", "hidden");})


          })}) 
        }

     function fuc1(subfeatur){
        
    // document.getElementById("figure1").innerHTML=" "
   


    // set the dimensions and margins of the graph
    var margin = {top: 10, right: 30, bottom: 30, left: 120},
        width = 460 - margin.left - margin.right,
        height = 400 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    // var svg0 = d3.select("#figure1")
    // .append("svg")
    //     .attr("width", width + margin.left + margin.right)
    //     .attr("height", height + margin.top + margin.bottom)
    // .append("g")
    //     .attr("transform",
    //         "translate(" + margin.left + "," + margin.top + ")");

    var svg1 = d3.select("#figure2")
    .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
    .append("g")
        .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");


    //         var svg2 = d3.select("#figure2")
    // .append("svg")
    //     .attr("width", width + margin.left + margin.right)
    //     .attr("height", height + margin.top + margin.bottom)
    // .append("g")
    //     .attr("transform",
    //         "translate(" + margin.left + "," + margin.top + ")");


            d3.csv("dosyalar/all_features_300_scene_1_complete.csv").then( function(data2) {
      
        d3.csv("dosyalar/all_features_300_scene_2_complete.csv").then( function(data1) {

        


            var subfeatures=subfeatur
            
           

            var Data1controListzero=[]
            var Data1controListone=[]
            var Data1controListtwo=[]

            var Data2controListzero=[]
            var Data2controListone=[]
            var Data2controListtwo=[]
          

       
            for( var i=0; i<data1.length; i++){
               

                if(data1[i]["label"]==0){
                    Data1controListzero.push(data1[i][subfeatures])

                }
                if(data1[i]["label"]==1){
                    Data1controListone.push(data1[i][subfeatures])

                    
                }
                if(data1[i]["label"]==2){
                    Data1controListtwo.push(data1[i][subfeatures])
                }
               
            }

            for( var i=0; i<data2.length; i++){
             

                if(data2[i]["label"]==0){
                    Data1controListzero.push(data2[i][subfeatures])

                }
                if(data2[i]["label"]==1){
                    Data2controListone.push(data2[i][subfeatures])

                    
                }
                if(data2[i]["label"]==2){
                    Data2controListtwo.push(data2[i][subfeatures])
                }
               
            }
    


            var data1Allofvalues=[...Data1controListzero,...Data1controListone,...Data1controListtwo]
            var maxAndMinValueFordata1=[Math.max(...data1Allofvalues),Math.min(...data1Allofvalues)]//[max,min]
            // console.log(maxAndMinValueFordata1)
            var data2Allofvalues=[...Data2controListzero,...Data2controListone,...Data2controListtwo]
            var maxAndMinValueFordata2=[Math.max(...data2Allofvalues),Math.min(...data2Allofvalues)]//[max,min]

        //   console.log(data2Allofvalues,data1Allofvalues)
      

            
            function getLimitValues(list){
                var keylist=[]
                
                var rangeValue=list[0]/5
                Math.floor(rangeValue)
                
                //key1,key2,key3,key4,key5

                //key1
                var key1="0-"+rangeValue
                var key2=rangeValue+"-"+2*rangeValue
                var key3=2*rangeValue+"-"+3*rangeValue
                var key4=3*rangeValue+"-"+4*rangeValue
                var key5=+4*rangeValue+"-"+5*rangeValue
                
               keylist.push({
                key:key1,
                value:rangeValue
               },
               {
                key:key2,
                value:2*rangeValue
               },
               {
                key:key3,
                value:3*rangeValue
               },
               {
                key:key4,
                value:4*rangeValue
               },
               {
                key:key5,
                value:5*rangeValue
               })
               return keylist
            }
            
            var limitValuesofdata1=getLimitValues(maxAndMinValueFordata1)//iki grafik iÃ§in limit verileri
            // console.log(limitValuesofdata1)
            var limitValuesofdata2=getLimitValues(maxAndMinValueFordata2)
            //console.log(limitValuesofdata1,limitValuesofdata2)

           //key:[values]//0-62.6:[2,4,45,17,45,60]
            var dictForBuild10=contrl(Data1controListzero,limitValuesofdata1)
            var dictForBuild11=contrl(Data1controListone,limitValuesofdata1)
            var dictForBuild12=contrl(Data1controListtwo,limitValuesofdata1)

           //key:[values]//0-62.6:[2,4,45,17,45,60]
            var dictForBuild20=contrl(Data1controListzero,limitValuesofdata2)
            var dictForBuild21=contrl(Data1controListone,limitValuesofdata2)
            var dictForBuild22=contrl(Data1controListtwo,limitValuesofdata2)



            var buildGraph10=getDictForgrpah(dictForBuild10)
            var buildGraph11=getDictForgrpah(dictForBuild11)
            var buildGraph12=getDictForgrpah(dictForBuild12)
            
            var buildGraph20=getDictForgrpah(dictForBuild20)
            var buildGraph21=getDictForgrpah(dictForBuild21)
            var buildGraph22=getDictForgrpah(dictForBuild22)

       


            var length10=getlengthforgrpah(buildGraph10)
            var length11=getlengthforgrpah(buildGraph11)
            var length12=getlengthforgrpah(buildGraph12)
            
            var length20=getlengthforgrpah(buildGraph20)
            var length21=getlengthforgrpah(buildGraph21)
            var length22=getlengthforgrpah(buildGraph22)
      

            function getmx(len0,len1,len2,list){
                var keylist=[]
                
                var rangeValue=list[0]/5
                
           
                //key1
                var key1="0-"+rangeValue
                var key2=rangeValue+"-"+2*rangeValue
                var key3=2*rangeValue+"-"+3*rangeValue
                var key4=3*rangeValue+"-"+4*rangeValue
                var key5=+4*rangeValue+"-"+5*rangeValue
       
                
               keylist.push({
                key:key1,
                value:[len0[key1], len1[key1],len2[key1]]
               },
               {
                key:key2,
                value:[len0[key2], len1[key2],len2[key2]]
               },
               {
                key:key3,
                value:[len0[key3], len1[key3],len2[key3]]
               },
               {
                key:key4,
                value:[len0[key4], len1[key4],len2[key4]]
               },
               {
                key:key5,
                value:[len0[key5], len1[key5],len2[key5]]
               },
               
               )
               return keylist
            }
                        
            function getlengthforgrpah(dict){
                var newdict={}
                for(len of Object.keys(dict)){
                    newdict[len]=dict[len].length
                }
                
                return newdict
            }

            
            function getDictForgrpah(data){
                var addit={}
                for(var i=0; i<data.length; i++){
                var addkey=data[i].key
                var addvalue=data[i].value    
                if (Object.hasOwn(addit, addkey)) {
                    addit[addkey].push(addvalue)
                }
                else{
                    addit[addkey]=[addvalue,]
                }
            }
            return addit
            }

  

        //0-10:[1,5,12]
       var x0= getmx(length10,length11,length12,maxAndMinValueFordata1)
       var y0domainnames=[x0[0].key,x0[1].key,x0[2].key,x0[3].key,x0[4].key]
       var x0values=[
                [x0[0].key,lookinlist(x0[0].value[0]),//ydomain1
                lookinlist(x0[0].value[1]),
                lookinlist(x0[0].value[2])],

                [x0[1].key,lookinlist(x0[1].value[0]),//ydomain2
                lookinlist(x0[1].value[1]),
                lookinlist(x0[1].value[2])],

                [x0[2].key,lookinlist(x0[2].value[0]),//ydomain3
                          lookinlist(x0[2].value[1]),
                          lookinlist(x0[2].value[2])],

                [x0[3].key,lookinlist(x0[3].value[0]),//ydomain3
                        lookinlist(x0[3].value[1]),
                        lookinlist(x0[3].value[2])],

                [x0[4].key,lookinlist(x0[4].value[0]),//ydomain4
                lookinlist(x0[4].value[1]),
                lookinlist(x0[4].value[2])],
              ]

        var x1= getmx(length20,length21,length22,maxAndMinValueFordata2)
        var y1domainnames=[x1[0].key,x1[1].key,x1[2].key,x1[3].key,x1[4].key]
        var x1values=[[x1[0].key,lookinlist(x1[0].value[0]),//ydomain1
                    lookinlist(x1[0].value[1]),
                lookinlist(x1[0].value[2])],

                [x1[1].key,lookinlist(x1[1].value[0]),//ydomain2
                lookinlist(x1[1].value[1]),
                lookinlist(x1[1].value[2])],

                [x1[2].key,lookinlist(x1[2].value[0]),//ydomain3
                          lookinlist(x1[2].value[1]),
                          lookinlist(x1[2].value[2])],

                [x1[3].key,lookinlist(x1[3].value[0]),//ydomain3
                        lookinlist(x1[3].value[1]),
                        lookinlist(x1[3].value[2])],

                [x1[4].key,lookinlist(x1[4].value[0]),//ydomain4
                lookinlist(x1[4].value[1]),
                lookinlist(x1[4].value[2])],
              ]
              
      

                      
        
       function lookinlist(value){
        if(value<=5){
            value=[5]//1
        }
        if(value>5&&value<=10){
            value=[5,10]//2
        }
        if(value>10&&value<=15){
            value=[5,10,15]//3
        }
        if(value>15&&value<=20){
            value=[5,10,15,20]//4
        }
        if(value>20&&value<=25){
            value=[5,10,15,20,25]//5
        }
        if(value>25&&value<=30){
            value=[5,10,15,20,25,30]//6
        }
        if(value>30&&value<=35){
            value=[5,10,15,20,25,30,35]//7
        }
        if(value>35&&value<=40){
            value=[5,10,15,20,25,30,35,40]//8
        }
        if(value>40&&value<=45){
            value=[5,10,15,20,25,30,35,40,45]//9
        }
        if(value>45&&value<=50){
            value=[5,10,15,20,25,30,35,40,45,50]//10
        }
        if(value>50){
            value=[5,10,15,20,25,30,35,40,45,50]
        }
        if(value==undefined){
            value=[]
        }
        return value

       }



       
       const data0 = [x0values[0],x0values[1],x0values[2],x0values[3],x0values[4]];
       const data11=[x1values[0],x1values[1],x1values[2],x1values[3],x1values[4]];
       
            // var liste11=[...]
            // Append a circle
           
            // Add Y axis
        // var y = d3.scaleBand()
        // .range([ height, 0 ])
        //     .domain(y0domainnames)
        //     .padding(0.05);
        // svg0.append("g")
        //     .style("font-size", 15)
        // svg0.append("g")
        //     .call(d3.axisLeft(y));

     

        //            // Add X axis
        // var x = d3.scaleLinear()
        //     .domain([0, 50])
        //     .range([ 0, width]);
        // svg0.append("g")
        //     .attr("transform", "translate(0," + height + ")")
        //     .call(d3.axisBottom(x))
        //     .selectAll("text")
        //     .attr("transform", "translate(-10,0)rotate(-45)")
        //     .style("text-anchor", "end");



        var y = d3.scaleBand()
        .range([ height, 0 ])
            .domain(y1domainnames)
            .padding(0.05);
        svg1.append("g")
            .style("font-size", 15)
        svg1.append("g")
            .call(d3.axisLeft(y));

     

                   // Add X axis
        var x = d3.scaleLinear()
            .domain([0, 50])
            .range([ 0, width]);
        svg1.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x))
            .selectAll("text")
            .attr("transform", "translate(-10,0)rotate(-45)")
            .style("text-anchor", "end");


          

       const maxCheckvalue0=[
                        data0[0][1],data0[0][2],data0[0][3],
                        data0[1][1],data0[1][2],data0[1][3],
                        data0[2][1],data0[2][2],data0[2][3],
                        data0[3][1],data0[3][2],data0[3][3],
                        data0[4][1],data0[4][2],data0[4][3]]

         const maxCheckvalue1=[
                        data11[0][1],data11[0][2],data11[0][3],
                        data11[1][1],data11[1][2],data11[1][3],
                        data11[2][1],data11[2][2],data11[2][3],
                        data11[3][1],data11[3][2],data11[3][3],
                        data11[4][1],data11[4][2],data11[4][3]]

                        console.log(maxCheckvalue1)      
   
       let maxVl0=Math.max(...maxCheckvalue0)
       let maxVl1=Math.max(...maxCheckvalue1)

       function f(array){
        for(let i=0;i<array[1].length;i++){
            return array[1][i]
        }

       }
       


       let newDatazerozero = []
       let newDatazeroone=[]
       let newDatazerotwo=[]

       for (i of data0) {
            for(val of i[1]){
                newDatazerozero.push({
                    key:i[0],
                    value:val
                })
               
            }

       }
       for (i of data0) {
            for(val of i[2]){
                newDatazeroone.push({
                    key:i[0],
                    value:val
                })
               
            }

       }
       for (i of data0) {
            for(val of i[3]){
                newDatazerotwo.push({
                    key:i[0],
                    value:val
                })
               
            }

       }

       let newDatazero = []
       let newDataone=[]
       let newDatatwo=[]

       for (i of data11) {
            for(val of i[1]){
                newDatazero.push({
                    key:i[0],
                    value:val
                })
               
            }

       }
       for (i of data11) {
            for(val of i[2]){
                newDataone.push({
                    key:i[0],
                    value:val
                })
               
            }

       }
       for (i of data11) {
            for(val of i[3]){
                newDatatwo.push({
                    key:i[0],
                    value:val
                })
               
            }

       }


    


       var tooltip2 = d3.select("#figure2")
    .append("div")
        .style("position", "absolute")
        .style("visibility", "hidden")
        .style("background-color", "white")
        .style("border", "solid")
        .style("border-width", "1px")
        .style("border-radius", "5px")
        .style("padding", "10px")
        .html("<p>I'm a tooltip written in HTML</p><img src='https://github.com/holtzy/D3-graph-gallery/blob/master/img/section/ArcSmal.png?raw=true'></img><br>Fancy<br><span style='font-size: 40px;'>Isn't it?</span>");
        var tooltip1 = d3.select("#figure1")
    .append("div")
        .style("position", "absolute")
        .style("visibility", "hidden")
        .style("background-color", "white")
        .style("border", "solid")
        .style("border-width", "1px")
        .style("border-radius", "5px")
        .style("padding", "10px")
        .html("<p>I'm a tooltip written in HTML</p><img src='https://github.com/holtzy/D3-graph-gallery/blob/master/img/section/ArcSmal.png?raw=true'></img><br>Fancy<br><span style='font-size: 40px;'>Isn't it?</span>");

    //     var tooltip2 = d3.select("#figure1")
    // .append("div")
    //     .style("position", "absolute")
    //     .style("visibility", "hidden")
    //     .style("background-color", "white")
    //     .style("border", "solid")
    //     .style("border-width", "1px")
    //     .style("border-radius", "5px")
    //     .style("padding", "10px")
    //     .html("<p>I'm a tooltip written in HTML</p><img src='https://github.com/holtzy/D3-graph-gallery/blob/master/img/section/ArcSmal.png?raw=true'></img><br>Fancy<br><span style='font-size: 40px;'>Isn't it?</span>");

  
       console.log(newDatazerozero,newDatazeroone,newDatazerotwo)
       console.log(newDatazero,newDataone,newDatatwo)//
    
        // svg0.selectAll("mycircle")
        // .data(newDatazero)
        // .enter()
        // .append("circle")
   
        //     .attr("cx", function(d) {return x(d.value)})
        //     .attr("cy", function(d) {console.log(d.key); return y(d.key+10) })
        //     .attr("r", "8")
        //     .style("fill", "blue")
        //     .attr("stroke", "black")
        //     .on("mouseover", function(d){return tooltip1.style("visibility", "visible");})
        //     .on("mousemove", function(d){return (tooltip1.html("Scene:2"+"<br>"+"Class:HC"+"<br>Range:"+d.path[0]["__data__"].key+"<br> Value:"+d.path[0]["__data__"].value)).style("top", (event.pageY-150)+"px").style("left",(event.pageX-150)+"px");})
        //     .on("mouseout", function(d){return tooltip1.style("visibility", "hidden");})

           
        
   
        // svg0.selectAll("circle456")
        // .data(newDatazeroone)
        // .enter()
        // .append("circle")
        // .on("mouseover", function(d){return tooltip2.style("visibility", "visible");})
        //     .on("mousemove", function(d){return (tooltip2.html("Scene:2"+"<br>"+"Class:SZ"+"<br>Range:"+d.path[0]["__data__"].key+"<br> Value:"+d.path[0]["__data__"].value)).style("top", (event.pageY-150)+"px").style("left",(event.pageX-150)+"px");})
        //     .on("mouseout", function(d){return tooltip2.style("visibility", "hidden");})

        //     .attr("cx", function(d) { return x(d.value);})
        //     .attr("cy", function(d) {console.log(d);  return y(d.key);})
        //     .attr("r", "8")
        //     .style("fill", "green")
        //     .attr("stroke", "black")
            
        
   
        // svg0.selectAll("mycircle")
        // .data(newDatazerotwo)
        // .enter()
        // .append("circle")
        // .on("mouseover", function(d){return tooltip2.style("visibility", "visible");})
        //     .on("mousemove", function(d){return (tooltip2.html("Scene:2"+"<br>"+"Class:BD"+"<br>Range:"+d.path[0]["__data__"].key+"<br> Value:"+d.path[0]["__data__"].value)).style("top", (event.pageY-150)+"px").style("left",(event.pageX-150)+"px");})
        //     .on("mouseout", function(d){return tooltip2.style("visibility", "hidden");})

        //     .attr("cx", function(d) { return x(d.value); })
        //     .attr("cy", function(d) {console.log(d); return y(d.key); })
        //     .attr("r", "8")
        //     .style("fill", "orange")
        //     .attr("stroke", "black")
           




       

            svg1.selectAll("mycircle")
        .data(newDatazero)
        .enter()
        .append("circle")
            .attr("cx", function(d) {return x(d.value)})
            .attr("cy", function(d) { return y(d.key)+10; })
            .attr("r", "8")
            .style("fill", "blue")
            .attr("stroke", "black")
            .on("mouseover", function(d){return tooltip2.style("visibility", "visible");})
            .on("mousemove", function(d){console.log(d);return (tooltip2.html("Scene:2"+"<br>"+"Class:HC"+"<br>Range:"+d.path[0]["__data__"].key+"<br> Value:"+d.path[0]["__data__"].value)).style("top", (event.pageY-150)+"px").style("left",(event.pageX-150)+"px");})
            .on("mouseout", function(d){return tooltip2.style("visibility", "hidden");})

        
       
        svg1.selectAll("circle456")
        .data(newDataone)
        .enter()
        .append("circle")
            .attr("cx", function(d) { return x(d.value)})
            .attr("cy", function(d) { return y(d.key)+30; })
            .attr("r", "8")
            .style("fill", "green")
            .attr("stroke", "black")
            .on("mouseover", function(d){return tooltip2.style("visibility", "visible");})
            .on("mousemove", function(d){console.log(d);return (tooltip2.html("Scene:2"+"<br>"+"Class:SZ"+"<br>Range:"+d.path[0]["__data__"].key+"<br> Value:"+d.path[0]["__data__"].value)).style("top", (event.pageY-150)+"px").style("left",(event.pageX-150)+"px");})
            .on("mouseout", function(d){return tooltip2.style("visibility", "hidden");})

        
   
        svg1.selectAll("mycircle")
        .data(newDatatwo)
        .enter()
        .append("circle")
            .attr("cx", function(d) { return x(d.value); })
            .attr("cy", function(d) { return y(d.key)+50; })
            .attr("r", "8")
            .style("fill", "orange")
            .attr("stroke", "black")
            .on("mouseover", function(d){return tooltip2.style("visibility", "visible");})
            .on("mousemove", function(d){return (tooltip2.html("Scene:2"+"<br>"+"Class:BD"+"<br>Range:"+d.path[0]["__data__"].key+"<br> Value:"+d.path[0]["__data__"].value)).style("top", (event.pageY-150)+"px").style("left",(event.pageX-150)+"px");})
            .on("mouseout", function(d){return tooltip2.style("visibility", "hidden");})


          })})

     }



        
        
    </script>
    
</body>
</html>